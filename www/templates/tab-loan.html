<ion-view title="{{'loan.title' | translate}}">
    <ion-content>

        <ion-refresher pulling-text="{{'refresh' | translate}}" on-refresh="onRefresh()"></ion-refresher>

        <div class="wait-message" ng-show="loading">
            <ion-spinner class="spinner-energized"></ion-spinner>
            <span>{{'loading' | translate}}</span>
        </div>



        <div class="list library" ng-hide="loading">
            <div class="item item-divider" ng-show="bookLoans.length" style="margin-bottom: 16px;">
                {{'loan.my_books' | translate}}
            </div>
            <div class="item book" ng-repeat="item in bookLoans" ui-sref="app.book({id:item.id})">
                <i class="icon ion-bookmark loan" ng-class="{'expired':item.loaned.expired<=0}" ng-show="item.loaned"></i>
                <img ng-src="{{item.thumb}}">
                <div class="ct">
                    <h2>{{item.title}}</h2>
                    <h3>{{item.author}}</h3>

                        <p ng-show="item.publisher">{{item.publisher}}<span ng-show="item.published_date"> ({{item.published_date | date:'yyyy'}})</span></p>
                        
                        <p ng-show="item.page_count>0">{{'loan.page' | translate}} {{item.page_count}}</p>
                    
                        
                </div>

                
            </div>

            <div class="item item-divider"  ng-show="bookLoaneds.length" style="margin-bottom: 16px;">
            {{'loan.friend_books' | translate}}
            </div>
            <div class="item book" ng-hide="item.removed" ng-repeat="item in bookLoaneds" ui-sref="app.book({id:item.id})">
                <button type="button" class="button button-icon  btn-more" ng-click="onActionBook($event, item)">
                    <i class="icon ion-android-more-vertical"></i>
                </button>
                <i class="icon ion-bookmark loan" ng-class="{'expired':item.loaned.expired<=0}" ng-show="item.loaned"></i>
                <img ng-src="{{item.thumb}}">
                <div class="ct">
                    <h2>{{item.title}}</h2>
                    <h3>{{item.author}}</h3>

                        <p ng-show="item.publisher">{{item.publisher}}<span ng-show="item.published_date"> ({{item.published_date | date:'yyyy'}})</span></p>
                        
                        <p ng-show="item.page_count>0">{{'loan.page' | translate}} {{item.page_count}}</p>
                    
                        
                </div>

                
            </div>

        </div>  


        <div class="notice-library-empty" ng-hide="bookLoaneds.length || bookLoans.length || loading">

        {{'loan.empty_list' | translate}}

    </div>

    </ion-content>
</ion-view>
